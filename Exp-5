import cv2
import numpy as np
from matplotlib import pyplot as plt
from google.colab.patches import cv2_imshow

def analyze_histogram(image_path):

    # Read image
    image = cv2.imread(image_path)

    if image is None:
        print("Error: Image not found!")
        return

    print("Input Image:")
    cv2_imshow(image)

    # Split the image into Blue, Green, Red channels
    channels = cv2.split(image)

    colors = ('b', 'g', 'r')
    channel_names = ["Blue", "Green", "Red"]

    plt.figure()
    plt.title("Color Histogram Analysis")
    plt.xlabel("Intensity Levels")
    plt.ylabel("Number of Pixels")

    # Calculate histogram for each channel
    for channel, color, name in zip(channels, colors, channel_names):

        hist = cv2.calcHist([channel], [0], None, [256], [0,256])

        print(f"\n{name} Channel Analysis:")
        print("Minimum Intensity:", int(np.min(channel)))
        print("Maximum Intensity:", int(np.max(channel)))
        print("Mean Intensity:", float(np.mean(channel)))

        plt.plot(hist, color=color)

    plt.show()

# Call the function
analyze_histogram("input.jpg")
